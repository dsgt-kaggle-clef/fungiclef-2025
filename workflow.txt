Pipeline
1. Preprocessing, fix the end of file error in some of the images
  a. Run fix_end_of_file.py
      python fix_end_of_file.py

2. Serialize images, append them to metadta and save to parquet (3 commands, 1 for train, val, and test)
  a. python clef/fungiclef-2025/fungiclef/preprocessing/serialize.py --csv scratch/fungiclef/dataset/metadata/FungiTastic-FewShot/FungiTastic-FewShot-Train.csv --image-dir scratch/fungiclef/dataset/images/FungiTastic-FewShot/train/fullsize --output scratch/fungiclef/dataset/processed/train_serialized.parquet
  b. python clef/fungiclef-2025/fungiclef/preprocessing/serialize.py --csv scratch/fungiclef/dataset/metadata/FungiTastic-FewShot/FungiTastic-FewShot-Val.csv --image-dir scratch/fungiclef/dataset/images/FungiTastic-FewShot/val/fullsize --output scratch/fungiclef/dataset/processed/val_serialized.parquet
  c. python clef/fungiclef-2025/fungiclef/preprocessing/serialize.py --csv scratch/fungiclef/dataset/metadata/FungiTastic-FewShot/FungiTastic-FewShot-Test.csv --image-dir scratch/fungiclef/dataset/images/FungiTastic-FewShot/test/fullsize --output scratch/fungiclef/dataset/processed/test_serialized.parquet


3a. Get embeddings from Dinov2
  a. python clef/fungiclef-2025/fungiclef/preprocessing/embedding.py --input scratch/fungiclef/dataset/processed/train_serialized.parquet --output scratch/fungiclef/embeddings/train_embeddings.parquet --model-name facebook/dinov2-base --batch-size 64 --num-workers 6
  b. python clef/fungiclef-2025/fungiclef/preprocessing/embedding.py --input scratch/fungiclef/dataset/processed/val_serialized.parquet --output scratch/fungiclef/embeddings/val_embeddings.parquet --model-name facebook/dinov2-base --batch-size 64 --num-workers 6
  c. python clef/fungiclef-2025/fungiclef/preprocessing/embedding.py --input scratch/fungiclef/dataset/processed/test_serialized.parquet --output scratch/fungiclef/embeddings/test_embeddings.parquet --model-name facebook/dinov2-base --batch-size 64 --num-workers 6

3b. Get embeddings from ViT with timm
  a. python clef/fungiclef-2025/fungiclef/preprocessing/embedding.py --input scratch/fungiclef/dataset/processed/train_serialized.parquet --output scratch/fungiclef/embeddings/plantclef/train_embeddings.parquet --model-name facebook/dinov2-base --batch-size 64 --num-workers 6 --model-name vit_base_patch14_reg4_dinov2.lvd142m
  b. python clef/fungiclef-2025/fungiclef/preprocessing/embedding.py --input scratch/fungiclef/dataset/processed/val_serialized.parquet --output scratch/fungiclef/embeddings/plantclef/val_embeddings.parquet --model-name facebook/dinov2-base --batch-size 64 --num-workers 6 --model-name vit_base_patch14_reg4_dinov2.lvd142m
  c. python clef/fungiclef-2025/fungiclef/preprocessing/embedding.py --input scratch/fungiclef/dataset/processed/test_serialized.parquet --output scratch/fungiclef/embeddings/plantclef/test_embeddings.parquet --model-name facebook/dinov2-base --batch-size 64 --num-workers 6 --model-name vit_base_patch14_reg4_dinov2.lvd142m

4. Train the model 
  a. python clef/fungiclef-2025/fungiclef/prediction/train.py --train scratch/fungiclef/embeddings/dinov2/train_embeddings.parquet --val scratch/fungiclef/embeddings/dinov2/val_embeddings.parquet --batch-size 64 --max-epochs 20 --output-dir scratch/fungiclef/model/base_model --learning-rate 1e-3

5. Generate Predictions
  a. python clef/fungiclef-2025/fungiclef/prediction/predict.py --test scratch/fungiclef/embeddings/dinov2/test_embeddings.parquet --model scratch/fungiclef/model/base_model/base_fungi-classifier-epoch=05-val_loss=5.17.ckpt --output clef/fungiclef-2025/fungiclef/prediction/base_predictions.csv
